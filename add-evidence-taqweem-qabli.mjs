import mysql from 'mysql2/promise';

const conn = await mysql.createConnection(process.env.DATABASE_URL);

const evidence = {
  evidenceName: 'التقويم القبلي',
  standardId: 11,
  description: `يُعدُّ التقويم القبلي خطوة أساسية في بداية العملية التعليمية، إذ يساعد المعلم على التعرف إلى الخبرات السابقة لدى الطلاب وقياس مستوى استعدادهم للدرس الجديد. ويتيح هذا الأسلوب فرصة لبناء الدرس على أساس واقعي يناسب مستوى الطلاب، كما يمكّن من تحديد الفروق الفردية وتشكيل مجموعات مناسبة عند الحاجة. يستخدم التقويم القبلي أدوات متنوعة مثل الأسئلة القصيرة، بطاقات الاستجابة، النقاش الموجّه، أو الأنشطة التمهيدية التي تُظهر فهم الطلاب الأولي للمفاهيم. ويسهم هذا النوع من التقويم في توجيه التخطيط السليم للدروس وتحسين فاعلية التعلّم.`,
  page2Boxes: JSON.stringify([
    {
      title: 'أهداف التقويم القبلي',
      content: `- التعرف على الخلفية المعرفية للطلاب قبل البدء بالدرس.
- تحديد المستوى العام للمجموعة الدراسية.
- الكشف عن المفاهيم الخاطئة ومعالجتها مبكرًا.
- دعم التخطيط التدريسي وفق الاحتياج الفعلي.
- توفير بيانات دقيقة لتحسين استراتيجيات الشرح.`
    },
    {
      title: 'أدوات التقويم القبلي',
      content: `- أسئلة قصيرة مباشرة تكشف الفهم الأولي.
- مناقشات مفتوحة لمعرفة تصورات الطلاب.
- بطاقات اختيار من متعدد لقياس المعارف الأساسية.
- تدريبات تمهيدية تُنفّذ بشكل فردي أو جماعي.
- استبيانات قصيرة حول المفاهيم المرتبطة بالدرس.`
    },
    {
      title: 'دور المعلم في التقويم القبلي',
      content: `- طرح أسئلة موجّهة تكشف المعرفة المبدئية.
- تنظيم الحوار بما يساعد على فهم أفكار الطلاب.
- تحليل الاستجابات وتحديد نقاط القوة والضعف.
- توظيف النتائج لبناء خطة تدريس مناسبة.
- تقديم تغذية راجعة تحفّز الطلاب وتوجههم.`
    },
    {
      title: 'دور الطالب في التقويم القبلي',
      content: `- التفاعل مع الأسئلة المطروحة بصدق ووضوح.
- التعبير عن معلوماته السابقة دون قلق.
- المشاركة في الأنشطة التمهيدية.
- توضيح تصوره العام عن الموضوع الجديد.
- تقبّل التغذية الراجعة والاستفادة منها.`
    },
    {
      title: 'مواقف مناسبة لاستخدام التقويم القبلي',
      content: `- بداية وحدة تعليمية جديدة.
- درس يتطلب معرفة سابقة مترابطة.
- عند وجود تباين واضح بين مستويات الطلاب.
- قبل الأنشطة التطبيقية المعقدة.
- لتقييم أثر التعلم السابق على الدرس الحالي.`
    },
    {
      title: 'نتائج متوقعة من التقويم القبلي',
      content: `- تحسين جودة التخطيط التدريسي.
- وضوح احتياجات الطلاب التعليمية.
- تخفيف المفاهيم الخاطئة منذ البداية.
- رفع استعداد الطلاب للدرس.
- بناء تعلم متدرج يبدأ من مستوى واقعي.`
    }
  ]),
  userFields: JSON.stringify([
    { label: 'التاريخ', type: 'text' },
    { label: 'الصف الدراسي', type: 'text' },
    { label: 'المادة', type: 'text' },
    { label: 'عنوان الدرس', type: 'text' },
    { label: 'عدد الطلاب', type: 'text' },
    { label: 'الأداة المستخدمة', type: 'text' },
    { label: 'مدة التنفيذ', type: 'text' },
    { label: 'المنفذ', type: 'text' }
  ]),
  defaultImageUrl: 'https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=800',
  stage: JSON.stringify(['ابتدائي', 'متوسط', 'ثانوي']),
  subject: JSON.stringify([])
};

try {
  const [result] = await conn.query(
    `INSERT INTO evidenceTemplates 
    (evidenceName, standardId, description, page2Boxes, userFields, defaultImageUrl, stage, subject) 
    VALUES (?, ?, ?, ?, ?, ?, ?, ?)`,
    [
      evidence.evidenceName,
      evidence.standardId,
      evidence.description,
      evidence.page2Boxes,
      evidence.userFields,
      evidence.defaultImageUrl,
      evidence.stage,
      evidence.subject
    ]
  );
  
  console.log('✅ تم إضافة الشاهد بنجاح!');
  console.log('   ID:', result.insertId);
  console.log('   الاسم:', evidence.evidenceName);
  console.log('   المعيار:', evidence.standardId);
  
} catch (error) {
  console.error('❌ خطأ في الإضافة:', error.message);
}

await conn.end();
